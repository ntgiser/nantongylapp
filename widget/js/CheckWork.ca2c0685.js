(function(t){function n(n){for(var s,i,c=n[0],r=n[1],h=n[2],l=0,p=[];l<c.length;l++)i=c[l],a[i]&&p.push(a[i][0]),a[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(n);while(p.length)p.shift()();return o.push.apply(o,h||[]),e()}function e(){for(var t,n=0;n<o.length;n++){for(var e=o[n],s=!0,c=1;c<e.length;c++){var r=e[c];0!==a[r]&&(s=!1)}s&&(o.splice(n--,1),t=i(i.s=e[0]))}return t}var s={},a={CheckWork:0},o=[];function i(n){if(s[n])return s[n].exports;var e=s[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)i.d(e,s,function(n){return t[n]}.bind(null,s));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=n,c=c.slice();for(var h=0;h<c.length;h++)n(c[h]);var u=r;o.push([10,"chunk-vendors","chunk-common"]),e()})({10:function(t,n,e){t.exports=e("61a5")},"61a5":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("f751"),e("097d");var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("ocn-background"),e("ocn-header",{attrs:{title:"养护考勤",center:!1}},[e("div",{staticClass:"title-left",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[e("i",{staticClass:"cubeic-back"})])]),e("div",{class:t.punchInClass,attrs:{id:"punchBtn"},on:{click:t.DKBtn}},[t._v("点击打卡")])],1)},a=[],o=e("3135"),i={data:function(){return{map:"",punchInClass:"",hh:"",mm:"",objhh:"17",objmm:"30"}},onReady:function(){this.SeeDKState(),this.__initmap()},created:function(){var t=this;this.$nextTick(function(){var n=new Date;t.hh=n.getHours(),t.mm=n.getMinutes()}),this.SeeDKState()},methods:{back:function(){this.slow.close()},__initmap:function(){this.ocn.loading(this).show("地图加载中",!0),document.getElementById("viewDiv").style.marginTop="60px";var t=this;loadjs(["esri/Map","esri/Basemap","esri/views/MapView","esri/geometry/SpatialReference","esri/Graphic","esri/layers/TileLayer","esri/layers/GraphicsLayer","esri/geometry/Point"],function(n,e,s,a,i,c,r,h){var u=new c({url:o.mapurl}),l=new e({baseLayers:[u],title:"矢量底图",id:"myBasemap",thumbnailUrl:"custom.png"}),p=new h({x:40590867.949618064,y:3536459.5250139614,spatialReference:new a(2364)}),f=new n({basemap:l}),d=new s({container:"viewDiv",center:p,zoom:5,map:f}),b=new r;function g(t,n){var e=new h({x:t,y:n,spatialReference:new a(2364)});d.goTo({target:e});var s=new i({geometry:e,symbol:{type:"picture-marker",url:"locate.png",width:"20px",height:"20px",yoffset:"10x"}});b.add(s)}if(f.add(b),t.ocn.loading(t).hide(),window.api){var w=api.getGlobalData({key:"gpsData"});w.WGS84&&t.get("http://119.3.196.157:8080/WebService1.asmx/Trans80",{lon:w.WGS84[0],lat:w.WGS84[1]},"json").then(function(t){console.log("******    gpsData.f80.xf80 === "+JSON.stringify(t)),t&&t.xf80&&g(t.xf80,t.yf80)})}else console.log("******    !window.api")})},locate:function(){if(window.api){var t=api.getGlobalData({key:"gpsData"});this.$refs.maplocate.contentWindow.getPosition(t.f80.xf80,t.f80.yf80)}},SeeDKState:function(){var t=this;this.get("api/attendanceStartEnd/getToday").then(function(n){1==n.success&&(t.hh<=8?0==n.data.length?(t.punchInClass="PunchIn_btn",t.slow.getItem("false")):(t.punchInClass="PunchIn_btnJS",t.slow.getItem("working")):t.hh>t.objhh?0==n.data.length?(t.punchInClass="PunchIn_btn",t.slow.getItem("false")):1==n.data.length&&0==n.data[0].status?(t.punchInClass="PunchIn_btn",t.slow.getItem("false")):(t.slow.getItem("working"),t.punchInClass="PunchIn_btnJS"):t.hh>8&&t.hh<t.objhh?t.punchInClass="PunchIn_btnJS":t.hh==t.objhh&&(t.mm>=t.objmm?0==n.data.length?(t.punchInClass="PunchIn_btn",t.slow.getItem("false")):1==n.data.length&&0==n.data[0].status?(t.punchInClass="PunchIn_btn",t.slow.getItem("false")):(t.slow.getItem("working"),t.punchInClass="PunchIn_btnJS"):t.punchInClass="PunchIn_btnJS"))})},DKBtn:function(){var t=this;if(this.SeeDKState(),"PunchIn_btnJS"===this.punchInClass)return this.ocn.warn_toast(this).show("不在打卡时间范围内或已经打过卡了"),void(this.punchInClass="PunchIn_no");this.hh<=8?(this.punchInClass="PunchIn_btn")&&this.post("api/attendanceStartEnd/create",{status:0}).then(function(n){console.log(JSON.stringify(n)),1==n.success&&(t.slow.setApiData("isPunch","working"),t.ocn.warn_toast(t).show("上班打卡成功！"),t.punchInClass="PunchIn_btnJS")}):this.hh>this.objhh?(this.punchInClass="PunchIn_btn")&&this.post("api/attendanceStartEnd/create",{status:1}).then(function(n){1==n.success&&(t.slow.setApiData("isPunch",""),t.ocn.warn_toast(t).show("下班打卡成功！"),t.punchInClass="PunchIn_btnJS")}):this.hh==this.objhh&&this.mm>=this.objmm&&(this.punchInClass="PunchIn_btn")&&this.post("api/attendanceStartEnd/create",{status:1}).then(function(n){console.log(JSON.stringify(n)),1==n.success&&(t.slow.setApiData("isPunch",""),t.ocn.warn_toast(t).show("下班打卡成功！"),t.punchInClass="PunchIn_btnJS")})}}},c=i,r=(e("f9c3"),e("2877")),h=Object(r["a"])(c,s,a,!1,null,"2fedefe5",null),u=h.exports,l=e("6912");Object(l["a"])(u)},"9c4b":function(t,n,e){},f9c3:function(t,n,e){"use strict";var s=e("9c4b"),a=e.n(s);a.a}});